### DB를 하나만 사용하는 애플리케이션은 일반적으로 EntityManagerFactory 를 하나만 생성한다.
```java
//공장 만들기, 비용이 아주 많이 든다.
EntityManagerFactory emf = Persistence.createEntityManagerFactory("jpabook");
```
위와 같은 코드로 엔티티 매니저 팩토리를 생성한다.

이제부터 필요할 때마다 엔티티 매니저 팩토리에서 `엔티티 매니저`를 생성하면 된다.
```java
//공장에서 엔티티 매니저 생성, 비용이 거의 안든다.
EntityManager em = emf.createEntityManager();
```

---

### 비용이 많이 드는 엔티티 매니저 팩토리

엔티티 매니터 팩토리(이하 EMF)는 이름 그대로 엔티티 매니저(이하 EM)를 만드는 공장.
<br>이 공장을 만드는데 비용이 상당히 많이 든다고 한다.

그래서 한개만 만들어서 `애플리케이션 전체에서 공유`하도록 설계되어 있다.

반면 EM 은 생성하는 비용이 거의 들지 않는다고 한다.

>EMF는 여러 스레드가 동시에 접근해도 안전하므로 서로 다른 스레드 간에 공유해도 되지만,<br> EM은 여러 스레드가 동시에 접근하면 동시성 문제가 발생하므로 스레드 간에 절대 공유하면 안된다.

---

### EM은 DB 연결이 꼭 필요한 시점까지 커넥션을 얻지 않는다.
